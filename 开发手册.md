# MyRPC

## version1

### 功能
`集成consul和netty，实现服务注册和发现，并且能够进行简单的服务端和客户端的交互`
* 定义消息格式
* 服务端
  * 实现服务注册
  * 提供服务
* 客户端
  * 实现服务发现
  * 调用服务

### 架构图

### 开发步骤

#### 公共部分

1. 定义消息格式
   * pom引入lombok，通过注解来简化开发
     * 例如@Data可以自动生成getter和setter，@Builder可以链式填充对象属性，@Log可以避免通过System.out.println来输出
   * 定义request和response类
2. 简单定义一个服务 GetUserById
   * 定义一个User类型
   * 定义一个UserService接口
   * 实现UserServiceImpl
   
#### 客户端

* 定义发送连接的类IOClient.java：使用Socket和服务端进行连接
* 定义动态代理类Proxy.java：每次客户端尝试调用服务端的方法时触发invoke，使用IOClient.java与服务端连接
* 实现Client.java：实例化一个代理，并通过代理调用服务端提供的GetUserById方法

#### 服务端

* 声明rpc启动和终止接口 Server/server/RPCServer.java
* 实现rpc接口 Server/server/impl/SimpleRPCServer.java和Server/server/impl/ThreadPoolRPCRPCServer.java
* 实现服务注册和发现 Server/provider/ServiceProvider.java
*  Server/server/work/WorkThread.java
* 基本逻辑：通过servierprovider注册服务（此时的注册仅保存到本地hashmap中），然后监听端口，如果有连接，则通过workThread反射调用方法来获得response

#### 改进1： 集成netty

#### 改进2： 集成consul

